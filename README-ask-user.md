# 问卷填写页面功能说明

## 页面概述

`ask-user.html` 是用户填写问卷的入口页面，提供了多种方式来访问和填写问卷。

## 主要功能

### 1. 问卷输入方式

#### 1.1 链接输入
- 用户可以直接输入完整的问卷链接
- 支持验证链接格式的有效性
- 自动跳转到问卷填写页面

#### 1.2 问卷代码输入
- 支持6位字母数字组合的问卷代码
- 自动转换为大写格式
- 验证代码格式后跳转到问卷页面

#### 1.3 二维码扫描
- 集成HTML5-QRCode库实现二维码扫描
- 支持摄像头权限管理
- 自动识别问卷链接或代码
- 扫描成功后自动跳转

### 2. 最近填写记录

- 显示用户最近填写的问卷
- 显示填写进度和最后访问时间
- 支持继续填写或查看结果
- 空状态提示用户开始填写

### 3. 历史记录管理

- 模态框展示所有填写历史
- 支持按标题搜索
- 支持按状态筛选（已完成、进行中、已过期）
- 显示详细的问卷信息和进度
- 支持重新开始已过期的问卷

## 技术特性

### 响应式设计
- 完美适配桌面、平板和手机设备
- 流畅的动画效果和交互体验
- 现代化的UI设计风格

### 用户体验
- 实时消息提示系统
- 加载状态和错误处理
- 直观的操作反馈
- 无障碍访问支持

### 安全性
- 输入验证和格式检查
- 安全的URL编码处理
- 摄像头权限管理

## 文件结构

```
src/main/resources/static/
├── ask-user.html          # 主页面文件
├── css/
│   └── ask-user.css       # 样式文件
└── js/
    └── ask-user.js        # 功能脚本
```

## 依赖库

- HTML5-QRCode: 二维码扫描功能
- 现代浏览器原生API支持

## 使用说明

### 填写新问卷
1. 选择输入方式（链接、代码或二维码）
2. 输入相应的信息
3. 点击"开始填写"按钮
4. 系统验证后自动跳转到问卷页面

### 查看历史记录
1. 点击"我的记录"或"查看所有历史记录"
2. 在模态框中浏览历史问卷
3. 使用搜索和筛选功能快速定位
4. 点击相应按钮继续填写或查看结果

### 二维码扫描
1. 切换到"二维码扫描"标签
2. 点击"开始扫描"按钮
3. 允许摄像头权限
4. 将二维码对准摄像头
5. 扫描成功后自动处理

## 注意事项

- 二维码扫描需要HTTPS环境或localhost
- 摄像头权限需要用户手动授权
- 建议在移动设备上使用二维码扫描功能
- 历史记录数据目前使用模拟数据，实际使用时需要连接后端API 