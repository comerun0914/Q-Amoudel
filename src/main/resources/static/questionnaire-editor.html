<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>问卷编辑</title>
    <link rel="stylesheet" href="css/questionnaire-editor.css">
    <!-- 添加图标字体支持 -->
    <link rel="stylesheet" href="//at.alicdn.com/t/font_8d5l8fzk5b87iudi.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_8d5l8fzk5b87iudi.css">
</head>
<body>
    <!-- 页眉 -->
    <header>
        <nav class="navbar">
            <div class="logo">幼儿星</div>
            <div class="nav-links">
                <a href="index.html">首页</a>
                <a href="questionnaire-management.html">问卷管理</a>
                <a href="#">数据统计</a>
                <div class="user-info" id="userInfo">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiM2NjZFRkEiLz4KPHBhdGggZD0iTTE2IDhDMTguMjA5MSA4IDIwIDkuNzkwODYgMjAgMTJDMjAgMTQuMjA5MSAxOC4yMDkxIDE2IDE2IDE2QzEzLjc5MDkgMTYgMTIgMTQuMjA5MSAxMiAxMkMxMiA5Ljc5MDg2IDEzLjc5MDkgOCAxNiA4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI0IDI0QzI0IDIwLjY4NjMgMjAuNDE0MiAxOCAxNiAxOEMxMS41ODU4IDE4IDggMjAuNjg2MyA4IDI0IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="用户头像" class="user-avatar" id="userAvatar">
                    <span class="user-name" id="userName">用户名</span>
                    <div class="user-dropdown" id="userDropdown">
                        <a href="#" class="dropdown-item" id="userCenter">用户中心</a>
                        <a href="#" class="dropdown-item" id="logoutBtn">退出登录</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <div class="main-content">
            <!-- 优化后的侧边栏 -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>问题类型</h3>
                    <span class="sidebar-subtitle">选择问题类型添加到问卷中</span>
                </div>
                
                <!-- 基础题型 -->
                <div class="question-category">
                    <div class="category-title">
                        <i class="iconfont icon-basic"></i>
                        <span>基础题型</span>
                    </div>
                    <div class="question-format-selector">
                        <button class="format-btn" data-type="single">
                            <i class="iconfont icon-radio"></i>
                            <span>单选题</span>
                        </button>
                        <button class="format-btn" data-type="multiple">
                            <i class="iconfont icon-checkbox"></i>
                            <span>多选题</span>
                        </button>
                        <button class="format-btn" data-type="text">
                            <i class="iconfont icon-text"></i>
                            <span>问答题</span>
                        </button>
                    </div>
                </div>

                <!-- 高级题型 -->
                <div class="question-category">
                    <div class="category-title">
                        <i class="iconfont icon-advanced"></i>
                        <span>高级题型</span>
                    </div>
                    <div class="question-format-selector">
                        <button class="format-btn" data-type="rating">
                            <i class="iconfont icon-star"></i>
                            <span>评分题</span>
                        </button>
                        <button class="format-btn" data-type="matrix">
                            <i class="iconfont icon-table"></i>
                            <span>矩阵题</span>
                        </button>
                    </div>
                </div>

                <!-- 特殊题型 -->
                <div class="question-category">
                    <div class="category-title">
                        <i class="iconfont icon-special"></i>
                        <span>特殊类型</span>
                    </div>
                    <div class="question-format-selector">
                        <button class="format-btn" data-type="file">
                            <i class="iconfont icon-upload"></i>
                            <span>文件上传</span>
                        </button>
                        <button class="format-btn" data-type="location">
                            <i class="iconfont icon-location"></i>
                            <span>定位获取</span>
                        </button>
                        <button class="format-btn" data-type="signature">
                            <i class="iconfont icon-signature"></i>
                            <span>签名题</span>
                        </button>
                    </div>
                </div>

                <!-- 功能卡片 -->
                <div class="question-category">
                    <div class="category-title">
                        <i class="iconfont icon-function"></i>
                        <span>功能卡片</span>
                    </div>
                    <div class="question-format-selector">
                        <button class="format-btn" data-type="user-info">
                            <i class="iconfont icon-user"></i>
                            <span>填写人信息</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 主要内容区域 -->
            <div class="main-content-area">
                <!-- 优化后的问卷信息区域 -->
                <div class="questionnaire-info-section">
                    <div class="section-header">
                        <h2><i class="iconfont icon-edit"></i> 问卷基本信息</h2>
                        <p class="section-description">设置问卷的标题、描述和基本配置</p>
                    </div>
                    
                    <div class="questionnaire-info-form">
                        <div class="form-row">
                            <div class="form-group title-group">
                                <label for="questionnaire-title">
                                    <i class="iconfont icon-title"></i>
                                    问卷标题 <span class="required">*</span>
                                </label>
                                <input type="text" id="questionnaire-title" placeholder="请输入问卷标题" class="title-input">
                                <div class="input-hint">建议标题简洁明了，突出问卷主题</div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group description-group">
                                <label for="questionnaire-description">
                                    <i class="iconfont icon-description"></i>
                                    问卷描述
                                </label>
                                <textarea id="questionnaire-description" placeholder="请输入问卷描述（可选）" rows="4" class="description-input"></textarea>
                                <div class="input-hint">描述问卷的目的、填写说明或注意事项</div>
                            </div>
                        </div>
                        
                        <div class="form-row date-row">
                            <div class="form-group date-group">
                                <label for="start-date">
                                    <i class="iconfont icon-calendar"></i>
                                    开始日期 <span class="required">*</span>
                                </label>
                                <input type="date" id="start-date" class="date-input">
                            </div>
                            <div class="form-group date-group">
                                <label for="end-date">
                                    <i class="iconfont icon-calendar"></i>
                                    结束日期 <span class="required">*</span>
                                </label>
                                <input type="date" id="end-date" class="date-input">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group limit-group">
                                <label for="submission-limit">
                                    <i class="iconfont icon-limit"></i>
                                    填写次数限制
                                </label>
                                <input type="number" id="submission-limit" min="1" max="999" value="1" class="limit-input">
                                <div class="input-hint">每个用户最多可填写此问卷的次数</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="editor-header">
                    <h1><i class="iconfont icon-questions"></i> 问卷编辑</h1>
                    <div class="editor-stats">
                        <span class="stat-item">
                            <i class="iconfont icon-question"></i>
                            <span id="question-count">0</span> 个问题
                        </span>
                        <span class="stat-item">
                            <i class="iconfont icon-time"></i>
                            <span id="estimated-time">约 5 分钟</span>
                        </span>
                    </div>
                </div>
                
                <!-- 问题区域 -->
                <div class="question-section" id="question-container">
                    <!-- 问题将通过侧边栏按钮动态添加 -->
                </div>
                
                <!-- 操作按钮区域 -->
                <div class="form-actions">
                    <div class="action-sidebar">
                        <div class="action-buttons">
                            <button class="format-lbtn save-btn" onclick="saveQuestionnaire()">
                                <i class="iconfont icon-save"></i>
                                保存问卷
                            </button>
                            <button class="format-lbtn preview" onclick="previewQuestionnaire()">
                                <i class="iconfont icon-eye"></i>
                                预览问卷
                            </button>
                            <button class="format-lbtn" onclick="window.location.href='questionnaire-management.html'">
                                <i class="iconfont icon-back"></i>
                                返回管理
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer>
        <div class="copyright">© 2025 湖北工程学院. 保留所有权利</div>
    </footer>

    <script src="js/config.js"></script>
    <script src="js/questionnaire-editor.js"></script>
</body>
</html>