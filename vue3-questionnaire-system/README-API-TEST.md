# API 接口测试页面使用说明

## 概述

API测试页面 (`/test-api`) 是一个专门用于测试各个接口数据拉取功能的演示页面。当后端API无法正常响应时，可以使用模拟数据进行前端功能测试。

## 访问方式

1. 启动Vue项目：`npm run dev`
2. 在浏览器中访问：`http://localhost:5173/test-api`
3. 或者从首页点击"API测试"卡片进入

## 功能特性

### 1. 基础信息测试
- 显示后端基础URL、API版本、超时时间等配置信息
- 提供模拟数据开关，可以切换使用真实API或模拟数据

### 2. 问卷列表测试
- 测试获取问卷列表接口
- 显示返回的问卷数据数量和详细信息
- 支持清空测试结果

### 3. 问卷统计测试
- 输入问卷ID，测试获取问卷统计数据
- 显示概览统计信息（总回复数、完成率、平均用时等）
- 支持清空测试结果

### 4. 问题分析测试
- 输入问卷ID，测试获取问题分析数据
- 显示各类型问题的统计数据和图表信息
- 支持清空测试结果

### 5. 用户资料测试
- 测试获取用户资料接口
- 显示用户信息、统计数据、设置等
- 支持清空测试结果

### 6. 网络状态测试
- 自动测试网络连接状态
- 显示连接成功或失败的详细信息
- 页面加载时自动执行

### 7. 错误日志
- 记录所有测试过程中的错误信息
- 显示错误标题、详细信息和时间戳
- 支持关闭和清空错误日志

## 使用方法

### 启用模拟数据
1. 在"基础信息测试"区域找到"启用模拟数据"开关
2. 打开开关，页面会显示"当前使用模拟数据进行测试"
3. 此时所有测试都会使用预设的模拟数据

### 使用真实API
1. 确保后端服务正常运行
2. 关闭"启用模拟数据"开关
3. 页面会显示"当前使用真实API进行测试"
4. 此时所有测试都会调用真实的后端接口

### 测试流程
1. **网络状态测试**：页面加载时自动执行，检查基本连接
2. **问卷列表测试**：点击"测试获取问卷列表"按钮
3. **问卷统计测试**：输入问卷ID，点击"测试获取统计"按钮
4. **问题分析测试**：输入问卷ID，点击"测试获取问题分析"按钮
5. **用户资料测试**：点击"测试获取用户资料"按钮

## 模拟数据说明

### 问卷列表数据
- 包含3个示例问卷（客户满意度调查、产品使用反馈、员工培训评估）
- 每个问卷包含完整的字段信息（ID、标题、描述、类型、状态等）

### 问卷统计数据
- 概览统计：总回复数1250、完成率87.5%、平均用时8.3分钟、今日回复45
- 问题分析：包含单选题、多选题、评分题的示例数据

### 用户资料数据
- 用户信息：测试用户的基本资料
- 统计数据：问卷数量、回复数量、浏览量、平均评分
- 设置信息：安全设置、隐私设置、通知设置
- 活动记录：用户的操作历史

## 故障排除

### 常见问题

1. **API调用失败**
   - 检查后端服务是否正常运行
   - 检查网络连接是否正常
   - 查看浏览器控制台的错误信息
   - 启用模拟数据进行功能测试

2. **模拟数据不显示**
   - 确保已启用"启用模拟数据"开关
   - 检查浏览器控制台是否有JavaScript错误
   - 刷新页面重新测试

3. **页面无法访问**
   - 检查Vue项目是否正常启动
   - 检查路由配置是否正确
   - 检查浏览器控制台是否有错误信息

### 调试技巧

1. **查看控制台日志**
   - 所有API调用都会在控制台输出详细信息
   - 包括请求URL、响应数据、错误信息等

2. **使用模拟数据**
   - 当真实API不可用时，启用模拟数据
   - 可以测试前端界面的显示和交互功能

3. **检查网络请求**
   - 在浏览器开发者工具的Network标签页查看请求详情
   - 检查请求头、响应状态、响应数据等

## 技术实现

### 文件结构
```
src/
├── views/
│   └── TestApi.vue          # API测试页面
├── utils/
│   └── mockData.js          # 模拟数据文件
├── api/
│   └── config.js            # API配置文件
└── utils/
    └── request.js           # 请求工具文件
```

### 核心组件
- **TestApi.vue**: 主要的测试页面组件
- **mockData.js**: 提供各种模拟数据
- **request.js**: 封装axios请求，处理错误和响应

### 数据流
1. 用户点击测试按钮
2. 检查是否启用模拟数据
3. 如果启用模拟数据，直接返回模拟数据
4. 如果使用真实API，调用后端接口
5. 处理响应数据或错误信息
6. 在界面上显示结果

## 扩展功能

### 添加新的测试项
1. 在`mockData.js`中添加相应的模拟数据
2. 在`TestApi.vue`中添加测试方法和UI组件
3. 在路由中添加新的测试页面（如需要）

### 自定义模拟数据
1. 修改`mockData.js`中的数据内容
2. 调整数据结构以匹配实际需求
3. 添加更多的测试场景和数据

### 集成真实API
1. 确保后端接口正常响应
2. 调整请求参数和响应处理逻辑
3. 添加更多的错误处理和重试机制

## 注意事项

1. **模拟数据仅供测试使用**，不要在生产环境中使用
2. **定期更新模拟数据**，确保与真实数据结构保持一致
3. **测试完成后及时清理**，避免影响其他功能
4. **记录测试结果**，便于问题排查和功能验证

## 联系支持

如果在使用过程中遇到问题，请：
1. 查看浏览器控制台的错误信息
2. 检查网络请求的详细信息
3. 参考本文档的故障排除部分
4. 联系开发团队获取技术支持
