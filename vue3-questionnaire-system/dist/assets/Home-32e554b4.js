import{u as N,a as q,r as g,i as D,c as l,o as m,d as p,f as s,w as o,e as a,h as u,F as w,g as y,j as H,t as f,D as I,k as V,m as R}from"./index-90a1d7b0.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{S as F}from"./SettingOutlined-9aa5e4f1.js";import{L as Q}from"./LogoutOutlined-9fb544b7.js";import{U as j}from"./UserOutlined-9d80a557.js";const z={class:"home-page"},G={class:"navbar"},J={class:"nav-links"},K={class:"user-info"},P={class:"username"},W={class:"user-role"},X={class:"welcome-section"},Y={class:"role-info"},Z={class:"quick-actions"},$={class:"action-cards"},ee={__name:"Home",setup(se){const r=N(),i=q(),c=g("测试用户"),d=g(""),n=g("");D(()=>{try{const t=i.userInfo;if(t&&t.username)if(c.value=t.username,d.value=t.avatar_url||"",t.role!==void 0)switch(t.role){case i.USER_ROLES.TEACHER_ADMIN:n.value="教师/管理员";break;case i.USER_ROLES.NORMAL_USER:n.value="普通用户";break;default:n.value="未知角色";break}else n.value="未设置角色";else t&&t.name?(c.value=t.name,d.value=t.avatar||"",n.value="用户"):(c.value="测试用户",d.value="",n.value="测试用户",console.log("使用默认用户信息进行测试"))}catch(t){console.error("获取用户信息失败:",t),c.value="测试用户",d.value="",n.value="测试用户"}});const C=()=>{r.push("/questionnaire/management")},E=()=>{r.push("/manual-create")},S=()=>{r.push("/questionnaire/statistics")},h=()=>{r.push("/user")},T=()=>{r.push("/questionnaire/fill")},x=async()=>{try{await i.logout(),R.success("退出登录成功"),r.push("/login")}catch(t){console.error("退出登录失败:",t),R.error("退出登录失败"),r.push("/login")}};return(t,e)=>{const M=l("a-avatar"),k=l("a-menu-item"),O=l("a-menu-divider"),U=l("a-menu"),b=l("a-dropdown"),A=l("a-layout-header"),_=l("a-card-meta"),v=l("a-card"),L=l("a-layout-content");return m(),p("div",z,[s(A,{class:"header"},{default:o(()=>[a("div",G,[e[6]||(e[6]=a("div",{class:"logo"},"幼儿星",-1)),a("div",J,[e[1]||(e[1]=a("a",{href:"#",class:"nav-link"},"首页",-1)),u(i).hasManagementAccess?(m(),p(w,{key:0},[a("a",{href:"#",class:"nav-link",onClick:C},"问卷管理"),a("a",{href:"#",class:"nav-link",onClick:S},"数据统计")],64)):(m(),p("a",{key:1,href:"#",class:"nav-link",onClick:h},"用户中心")),e[2]||(e[2]=a("a",{href:"#",class:"nav-link"},"帮助中心",-1))]),a("div",K,[s(b,null,{overlay:o(()=>[s(U,null,{default:o(()=>[s(k,{key:"profile"},{default:o(()=>[s(u(j)),e[3]||(e[3]=y(" 个人资料 ",-1))]),_:1,__:[3]}),s(k,{key:"settings"},{default:o(()=>[s(u(F)),e[4]||(e[4]=y(" 设置 ",-1))]),_:1,__:[4]}),s(O),s(k,{key:"logout",onClick:x},{default:o(()=>[s(u(Q)),e[5]||(e[5]=y(" 退出登录 ",-1))]),_:1,__:[5]})]),_:1})]),default:o(()=>[a("a",{class:"ant-dropdown-link",onClick:e[0]||(e[0]=H(()=>{},["prevent"]))},[s(M,{src:d.value,class:"user-avatar"},null,8,["src"]),a("span",P,f(c.value),1),a("span",W,"("+f(n.value)+")",1),s(u(I))])]),_:1})])])]),_:1}),s(L,{class:"main-content"},{default:o(()=>[a("div",X,[a("h1",null,"欢迎回来，"+f(c.value)+"！",1),e[7]||(e[7]=a("p",null,"您已成功登录幼儿星问卷管理系统",-1)),a("p",Y,"当前身份："+f(n.value),1)]),a("div",Z,[e[13]||(e[13]=a("h2",null,"快速操作",-1)),a("div",$,[u(i).hasManagementAccess?(m(),p(w,{key:0},[s(v,{class:"action-card",onClick:C},{cover:o(()=>e[8]||(e[8]=[a("div",{class:"card-icon"},"📊",-1)])),default:o(()=>[s(_,{title:"问卷管理",description:"查看、编辑和管理您的问卷"})]),_:1}),s(v,{class:"action-card",onClick:E},{cover:o(()=>e[9]||(e[9]=[a("div",{class:"card-icon"},"➕",-1)])),default:o(()=>[s(_,{title:"创建问卷",description:"创建新的问卷和表单"})]),_:1}),s(v,{class:"action-card",onClick:S},{cover:o(()=>e[10]||(e[10]=[a("div",{class:"card-icon"},"📈",-1)])),default:o(()=>[s(_,{title:"数据统计",description:"查看问卷的统计数据和结果"})]),_:1})],64)):V("",!0),s(v,{class:"action-card",onClick:h},{cover:o(()=>e[11]||(e[11]=[a("div",{class:"card-icon"},"👤",-1)])),default:o(()=>[s(_,{title:"用户中心",description:"管理您的账户和个人信息"})]),_:1}),s(v,{class:"action-card",onClick:T},{cover:o(()=>e[12]||(e[12]=[a("div",{class:"card-icon"},"📝",-1)])),default:o(()=>[s(_,{title:"填写问卷",description:"参与问卷调查"})]),_:1})])])]),_:1})])}}},re=B(ee,[["__scopeId","data-v-3449b35d"]]);export{re as default};
