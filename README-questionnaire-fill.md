# 问卷填写页面功能说明

## 页面概述

`questionnaire-fill.html` 是用户实际填写问卷的页面，提供了完整的问卷填写体验，包括多种题型支持、进度跟踪、草稿保存等功能。

## 主要功能

### 1. 问卷填写功能

#### 1.1 多种题型支持
- **单选题**：支持单选选项，自动验证必答题
- **多选题**：支持多选选项，可设置必答
- **文本题**：支持短文本和长文本输入
- **评分题**：支持星级评分（1-5星）
- **矩阵题**：支持行列矩阵选择
- **日期题**：支持日期选择
- **时间题**：支持时间选择

#### 1.2 智能导航
- 逐题显示，避免页面过长
- 上一题/下一题导航
- 进度条显示填写进度
- 最后一题自动显示完成界面

#### 1.3 答案管理
- 实时保存用户答案
- 支持草稿保存功能
- 自动加载已保存的答案
- 答案验证和必答题检查

### 2. 用户体验功能

#### 2.1 进度跟踪
- 实时显示填写进度
- 进度条可视化
- 已答题数量统计

#### 2.2 计时功能
- 自动开始计时
- 显示填写时长
- 预计用时提示

#### 2.3 保存提醒
- 页面离开前提醒保存
- 草稿自动保存
- 保存成功提示

### 3. 提交功能

#### 3.1 答案摘要
- 提交前显示所有答案
- 格式化答案显示
- 支持重新检查

#### 3.2 提交确认
- 必答题验证
- 提交确认对话框
- 提交成功后跳转

## 技术特性

### 响应式设计
- 完美适配各种设备尺寸
- 移动端友好的交互设计
- 流畅的动画效果

### 数据持久化
- LocalStorage本地存储
- 自动保存和恢复
- 数据完整性保护

### 用户体验
- 直观的操作反馈
- 友好的错误提示
- 无障碍访问支持

## 文件结构

```
src/main/resources/static/
├── questionnaire-fill.html    # 主页面文件
├── css/
│   └── questionnaire-fill.css # 样式文件
└── js/
    └── questionnaire-fill.js  # 功能脚本
```

## 使用说明

### 开始填写
1. 通过链接、代码或二维码访问页面
2. 系统自动加载问卷数据
3. 显示问卷标题和描述
4. 开始逐题填写

### 填写过程
1. 阅读问题内容
2. 选择或输入答案
3. 点击"下一题"继续
4. 可随时保存草稿

### 完成提交
1. 填写完所有问题
2. 查看答案摘要
3. 确认无误后提交
4. 系统跳转到结果页面

## 支持的URL参数

- `id`: 问卷ID
- `link`: 问卷链接
- `code`: 问卷代码
- `restart`: 重新开始标志

## 数据格式

### 问卷数据结构
```javascript
{
    id: 'questionnaire-id',
    title: '问卷标题',
    description: '问卷描述',
    questions: [
        {
            id: 1,
            type: 'single',
            text: '问题文本',
            options: ['选项1', '选项2'],
            required: true
        }
    ],
    startTime: '开始时间',
    estimatedTime: '预计用时'
}
```

### 答案数据结构
```javascript
{
    '1': 0,                    // 单选题答案（选项索引）
    '2': [0, 2],              // 多选题答案（选项索引数组）
    '3': '文本答案',           // 文本题答案
    '4': 4,                   // 评分题答案（星级）
    '5': {0: 2, 1: 3}         // 矩阵题答案（行索引: 列索引）
}
```

## 注意事项

- 页面需要现代浏览器支持
- 建议在HTTPS环境下使用
- 本地存储有容量限制
- 提交后答案无法修改
- 支持断点续填功能 