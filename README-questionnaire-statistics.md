# 问卷数据统计页面

## 概述

基于问卷管理页面，我创建了一个全新的数据统计页面，提供全面的问卷数据分析和可视化功能。

## 功能特性

### 1. 核心统计卡片
- **总问卷数**: 显示用户创建的所有问卷数量
- **总提交数**: 显示所有问卷的总提交次数
- **完成率**: 显示问卷的平均完成率
- **独立用户**: 显示参与问卷填写的独立用户数量
- **变化率**: 显示各项指标相对于上一周期的变化情况

### 2. 时间筛选功能
- 预设时间范围：最近7天、30天、3个月、1年
- 自定义日期范围选择
- 实时数据更新

### 3. 数据可视化图表
- **趋势图表** (Chart.js): 显示问卷提交、完成、用户数量的时间趋势
- **状态分布图** (ECharts): 饼图显示问卷状态分布（已发布、草稿、已禁用）
- **热门问卷排行** (ECharts): 横向柱状图显示按不同指标排序的问卷排行
- **用户行为分析** (ECharts): 饼图显示用户访问设备分布

### 4. 详细数据表格
- 支持多种数据类型：问卷数据、用户数据、提交数据
- 分页显示，每页10条记录
- 包含问卷名称、状态、创建时间、提交数、完成数、完成率、平均用时等信息
- 操作按钮：预览、编辑等

### 5. 实时监控
- 当前在线用户数
- 今日新增提交数
- 系统响应时间
- 每5秒自动更新

### 6. 数据导出功能
- 导出完整统计数据为JSON格式
- 导出表格数据为CSV格式
- 支持按指标类型筛选导出

## 技术实现

### 前端技术栈
- **HTML5**: 语义化标签，响应式布局
- **CSS3**: 现代化样式，动画效果，响应式设计
- **JavaScript ES6+**: 模块化代码，异步处理
- **Chart.js**: 轻量级图表库，用于趋势图
- **ECharts**: 功能强大的图表库，用于复杂图表

### 页面结构
```
questionnaire-statistics.html          # 主页面
├── css/
│   └── questionnaire-statistics.css  # 样式文件
└── js/
    └── questionnaire-statistics.js   # 功能脚本
```

### 核心功能模块
1. **页面初始化**: 用户认证、时间筛选器、图表容器
2. **数据加载**: 从后端API获取统计数据，支持模拟数据
3. **图表渲染**: 动态创建和更新各种图表
4. **表格管理**: 数据展示、分页、筛选
5. **实时监控**: 定时更新实时数据
6. **数据导出**: 多种格式的数据导出

## 使用方法

### 1. 访问页面
- 登录后点击导航栏的"数据统计"
- 或直接访问 `questionnaire-statistics.html`

### 2. 查看统计数据
- 页面加载后自动显示最近30天的统计数据
- 使用时间筛选器查看不同时间范围的数据
- 点击图表控制按钮切换不同的数据指标

### 3. 导出数据
- 点击"导出数据"按钮导出完整统计数据
- 在详细数据表格中点击"导出表格"按钮导出表格数据

### 4. 实时监控
- 页面右下角显示实时监控数据
- 数据每5秒自动更新

## 配置说明

### 时间范围配置
```javascript
let timeRange = 30; // 默认30天
const timeRanges = [7, 30, 90, 365]; // 支持的时间范围
```

### 图表配置
- **趋势图**: 支持提交数量、完成数量、用户数量三种指标
- **排行图**: 支持按提交数、完成数、浏览量排序
- **表格数据**: 支持问卷、用户、提交三种数据类型

### API接口
```javascript
// 统计数据接口
CONFIG.API_ENDPOINTS.STATISTICS

// 请求参数
{
    creatorId: "用户ID",
    timeRange: "时间范围",
    startDate: "开始日期", // 可选
    endDate: "结束日期"    // 可选
}
```

## 响应式设计

### 桌面端 (>768px)
- 4列统计卡片布局
- 2x2图表网格布局
- 完整功能展示

### 平板端 (≤768px)
- 单列统计卡片布局
- 单列图表布局
- 表格横向滚动

### 移动端 (≤480px)
- 紧凑的卡片布局
- 图表最小高度250px
- 触摸友好的按钮尺寸

## 浏览器兼容性

- **现代浏览器**: Chrome 60+, Firefox 55+, Safari 12+, Edge 79+
- **图表库**: Chart.js 3.x, ECharts 5.x
- **JavaScript**: ES6+ (支持async/await, 箭头函数等)

## 性能优化

1. **懒加载**: 图表按需初始化
2. **防抖处理**: 时间筛选器变化时避免频繁请求
3. **内存管理**: 页面卸载时清理定时器和图表实例
4. **缓存策略**: 统计数据缓存，减少重复请求

## 扩展功能

### 可添加的新功能
1. **数据钻取**: 点击图表元素查看详细数据
2. **自定义图表**: 用户可自定义图表类型和样式
3. **数据对比**: 支持不同时间段数据对比
4. **预警系统**: 设置数据阈值，异常时自动提醒
5. **报表生成**: 自动生成PDF/Word格式的统计报告

### 后端接口扩展
1. **实时数据推送**: WebSocket支持
2. **数据聚合**: 支持更复杂的数据统计
3. **权限控制**: 基于角色的数据访问控制
4. **数据备份**: 定期备份统计数据

## 注意事项

1. **数据安全**: 确保用户只能查看自己的问卷数据
2. **性能监控**: 大量数据时注意图表渲染性能
3. **错误处理**: 网络异常时提供友好的错误提示
4. **数据准确性**: 确保统计数据的实时性和准确性

## 总结

这个数据统计页面为问卷系统提供了全面的数据分析能力，通过现代化的图表展示和实时监控，帮助用户深入了解问卷的使用情况和用户行为。页面采用响应式设计，支持多种设备访问，具有良好的用户体验和扩展性。
